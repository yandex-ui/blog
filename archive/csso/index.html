<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7,IE=edge"><meta name="viewport" content="width=device-width"><meta name="generator" content="DocPad v6.65.0" /><link  rel="stylesheet" href="/blog/style.css" /></head><body><div class="page"><h1 class="page-head"><a href="../">Архив клуба по разработке интерфейсов</a></h1><div class="page-content"><header><h1>Новая версия CSSO</h1><p>Опубликовано Thu Jul 24 2014 15:00:57 GMT+0400 (MSK). Автор: Сергей Крыжановский.</p></header><h2 id="-">Кратко о проекте</h2>
<p>Вышел <a href="https://github.com/afelix/csso">CSSO</a> 1.2. Это CSS-минимизатор с элементами структурной минимизации. Разница между сжатием без структурных изменений и структурным сжатием кратко описана вот в <a href="http://skryzhanovsky.ya.ru/replies.xml?item_no=57">этой записи</a>.</p>
<p>Что изменилось с прошлой версии 1.1:</p>
<ul>
<li><p>Основные изменения произошли внутри — переход на генерированный парсер, разбор CSS в детальный AST, более удобные заготовки для будущих улучшений. В итоге CSSO был переписан полностью.</p>
</li>
<li><p>Убрана возможность управлять минимизацией. Если человек вынужден вмешиваться в работу утилиты, это ошибка, о которой стоит рассказать.</p>
</li>
<li><p>Удалена любая работа с malformed CSS. В минимизации сломанного стиля нет никакого смысла.</p>
</li>
<li><p>Пробная версия оптимизации margin / padding заменена удалением перекрываемых shorthand-свойств.</p>
</li>
<li><p>Добавлена документация на английском языке.</p>
</li>
<li><p>Исправлены замеченные ошибки, реализованы некоторые пожелания пользователей.</p>
</li>
</ul>
<p>Использовать CSSO можно из командной строки, из Node.js модулей, а также через веб-интерфейс:</p>
<ul>
<li><a href="https://github.com/afelix/csso/blob/master/README.ru.md">Краткое руководство на русском языке</a></li>
<li><a href="https://github.com/afelix/csso/blob/master/MANUAL.ru.md">Детальное описание минимизации</a></li>
<li><a href="http://afelix.github.com/csso/csso.html">Веб-интерфейс</a></li>
</ul>
<h2 id="-">Минимизация без изменения структуры</h2>
<p>Наиболее распространённый подход к сжатию CSS — заменить значения на более короткие и убрать все излишества, повышающие читабельность, но не влияющие на рендеринг:</p>
<p><img src="http://img-fotki.yandex.ru/get/5809/108933203.0/0_58fdd_5b27bb51_XL.jpg" alt="Минимизация без изменения структуры"></p>
<p>В некоторых случаях этого бывает достаточно, львиную долю выигрыша в размере даёт именно этот подход, ведь форматирующие пробелы и объясняющие комментарии занимают немало места. Однако можно пойти и дальше.</p>
<h2 id="-">Структурная минимизация</h2>
<p>Этот вид сжатия CSS основан на том, что CSS может быть избыточным, а CSSO некоторые избытки обнаруживает и уничтожает с целью сократить текст. Базовые элементы выглядят так: </p>
<p><img src="http://img-fotki.yandex.ru/get/5307/108933203.0/0_58fde_3ca9b051_XL.jpg" alt="Базовая структурная минимизация"></p>
<p>Несколько более сложной операцией является частичное слияние блоков (потому потребовалась отдельная схема). CSSO анализирует соседние блоки и проверяет, есть ли возможность слить их, поделив свойства. Если всё хорошо и есть выигрыш в таком слиянии, оно происходит:</p>
<p><img src="http://img-fotki.yandex.ru/get/4813/108933203.0/0_58fdf_b8d86d0a_XL.jpg" alt="Частичное слияние блоков"></p>
<p>Разделение — взгляд на блоки с другой стороны. Будет ли короче CSS, если добавить новый блок, выделив в него общие для соседей свойства? Если будет, блок создаётся:</p>
<p><img src="http://img-fotki.yandex.ru/get/5307/108933203.0/0_58fe0_2c430514_XL.jpg" alt="Частичное разделение блоков"></p>
<h2 id="-">Немного лирики</h2>
<p>CSSO не «серебряная пуля», он не сократит CSS до одного символа и не превратит плохой стиль в идеальный. Тем не менее мы верим, что это ещё один шаг на пути к лучшему вебу.</p>
<p>Устанавливайте, пользуйтесь, присылайте критику и пожелания. Имеющим аккаунт на <a href="https://github.com/">GitHub</a> лучше использовать <a href="https://github.com/afelix/csso/issues">Issues</a> проекта. Если это невозможно, пишите письма на <a href="mailto:skryzhanovsky@ya.ru">skryzhanovsky@ya.ru</a> или оставляйте комментарии к этой записи.</p>
</div></div><!-- Yandex.Metrika counter --><div style="display:none;"><script type="text/javascript">(function(w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter8530063 = new Ya.Metrika({id:8530063, enableAll: true}); } catch(e) { } }); })(window, "yandex_metrika_callbacks");</script></div><script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script><noscript><div><img src="//mc.yandex.ru/watch/8530063" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>