---
title: Новая версия CSSO
author: Сергей Крыжановский
tags: [CSS, инструменты, оптимизация]
---

## Кратко о проекте

Вышел [CSSO][1] 1.2. Это CSS-минимизатор с элементами структурной минимизации. Разница между сжатием без структурных изменений и структурным сжатием кратко описана вот в [этой записи][2].

Что изменилось с прошлой версии 1.1:

- Основные изменения произошли внутри — переход на генерированный парсер, разбор CSS в детальный AST, более удобные заготовки для будущих улучшений. В итоге CSSO был переписан полностью.

- Убрана возможность управлять минимизацией. Если человек вынужден вмешиваться в работу утилиты, это ошибка, о которой стоит рассказать.

- Удалена любая работа с malformed CSS. В минимизации сломанного стиля нет никакого смысла.

- Пробная версия оптимизации margin / padding заменена удалением перекрываемых shorthand-свойств.

- Добавлена документация на английском языке.

- Исправлены замеченные ошибки, реализованы некоторые пожелания пользователей.

Использовать CSSO можно из командной строки, из Node.js модулей, а также через веб-интерфейс:

- [Краткое руководство на русском языке][3]
- [Детальное описание минимизации][4]
- [Веб-интерфейс][5]

## Минимизация без изменения структуры

Наиболее распространённый подход к сжатию CSS — заменить значения на более короткие и убрать все излишества, повышающие читабельность, но не влияющие на рендеринг:

![Минимизация без изменения структуры][6]

В некоторых случаях этого бывает достаточно, львиную долю выигрыша в размере даёт именно этот подход, ведь форматирующие пробелы и объясняющие комментарии занимают немало места. Однако можно пойти и дальше.

## Структурная минимизация

Этот вид сжатия CSS основан на том, что CSS может быть избыточным, а CSSO некоторые избытки обнаруживает и уничтожает с целью сократить текст. Базовые элементы выглядят так: 

![Базовая структурная минимизация][7]

Несколько более сложной операцией является частичное слияние блоков (потому потребовалась отдельная схема). CSSO анализирует соседние блоки и проверяет, есть ли возможность слить их, поделив свойства. Если всё хорошо и есть выигрыш в таком слиянии, оно происходит:

![Частичное слияние блоков][8]

Разделение — взгляд на блоки с другой стороны. Будет ли короче CSS, если добавить новый блок, выделив в него общие для соседей свойства? Если будет, блок создаётся:

![Частичное разделение блоков][9]

## Немного лирики

CSSO не «серебряная пуля», он не сократит CSS до одного символа и не превратит плохой стиль в идеальный. Тем не менее мы верим, что это ещё один шаг на пути к лучшему вебу.

Устанавливайте, пользуйтесь, присылайте критику и пожелания. Имеющим аккаунт на [GitHub][10] лучше использовать [Issues][11] проекта. Если это невозможно, пишите письма на [skryzhanovsky@ya.ru][12] или оставляйте комментарии к этой записи.

[1]: https://github.com/afelix/csso
[2]: http://skryzhanovsky.ya.ru/replies.xml?item_no=57
[3]: https://github.com/afelix/csso/blob/master/README.ru.md
[4]: https://github.com/afelix/csso/blob/master/MANUAL.ru.md
[5]: http://afelix.github.com/csso/csso.html
[6]: http://img-fotki.yandex.ru/get/5809/108933203.0/0_58fdd_5b27bb51_XL.jpg
[7]: http://img-fotki.yandex.ru/get/5307/108933203.0/0_58fde_3ca9b051_XL.jpg
[8]: http://img-fotki.yandex.ru/get/4813/108933203.0/0_58fdf_b8d86d0a_XL.jpg
[9]: http://img-fotki.yandex.ru/get/5307/108933203.0/0_58fe0_2c430514_XL.jpg
[10]: https://github.com/
[11]: https://github.com/afelix/csso/issues
[12]: mailto:skryzhanovsky@ya.ru
