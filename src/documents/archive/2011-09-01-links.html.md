---
title: О вёрстке ссылок
author: Роман Комаров
tags: [CSS, вёрстка]
---

![Иллюстрация псевдоссылки с кавычками][7]

Что может быть сложного в вёрстке ссылок? На первый взгляд — ничего. Однако в сложных интерфейсах может существовать множество разновидностей ссылок, а вместе с ними и число мелочей, которые нужно учитывать:

- около ссылки может быть иконка с неизвестным размером, которую не нужно подчёркивать;
- часто появляется необходимость в псевдоссылках, обычно подчёркнутых пунктиром;
- бывает, что нужно расположить какие-либо символы рядом со ссылкой, но без подчёркивания: кавычки, стрелочки, различные другие дополнительные элементы.

Кроме того, эти мелочи могут встречаться не только по отдельности, но и комбинироваться, образуя, например, псевдоссылку с иконкой.

Если не озаботиться тем, чтобы привести все ссылки к единому виду, то в итоге настанет день, когда в коде проекта окажутся десятки различных реализаций одного и того же, а также необоснованные и неудобные в дальнейшем применении «обходные пути».

На помощь приходит принцип БЭМ, на основе которого можно создать достаточно универсальный блок-ссылку, которую очень удобно использовать для решения большинства задач.

## Дополнительный элемент[<sup>пример</sup>][2]

У верстальщиков, растущих на статьях о семантике и веб-стандартах, иногда возникают довольно радикальные мысли о том, что любые лишние элементы «несемантичны» и «неправильны». Подобные утверждения в большинстве случаев не имеют под собой никакой основы и чаще могут только повредить в вёрстке сколько-либо сложных интерфейсов. 

Сама тема развенчания мифа о «несемантичности» довольно обширная. Но в рамках рассказа о ссылках стоит лишь сказать, что добавление всего одного дополнительного элемента может очень благотворно сказаться на том, что в итоге можно будет сделать с блоком.

Представим, что у нас есть просто ссылка: `<a class="b-link">ссылка</a>`. Возьмём ситуацию, когда надо добавить слева от неё иконку. Если просто вложить картинку (или инлайн-блок) в ссылку, то подчёркивание будет и под иконкой. А этого нам и нужно избежать. Чаще всего верстальщики решают эту задачу, добавляя слева соответствующий `padding`, а саму иконку позиционируя над ним. Такой подход нам не подходит:

- надо знать ширину иконки, а значит, решение уже не универсально;
- если мы захотим добавить пунктирное подчёркивание, то оно из-за `padding` будет и под иконкой, а если заменить `padding` на `margin`, то между иконкой и ссылкой будет некликабельный промежуток, что тоже плохо.

Ещё можно встретить подход, когда иконке задают `float: left`, а ссылку делают инлайн-блочной или ставят в контекст, в котором `float` ничего не будет ломать. Однако это тоже не универсально:

- нам нужна ссылка, которую можно вставить куда угодно, а не только в начало или конец блока (`float` налагает свои ограничения);
- если применить к ссылке `inline-block`, то пунктирное подчёркивание будет под иконкой.

Другие возможные решения, в большинстве своём, имеют схожие проблемы.

А решается всё просто: убираем подчёркивание у самой ссылки, а тот текст, который должен быть подчёркнут, обрамляем в элемент, к которому уже и будут применяться простое или пунктирное подчёркивание.

Для того чтобы осталась возможность использовать обычную ссылку без внутренних элементов, вынесем то, что у нас получается, в модификатор.

Добавив модификаторы и элемент, получим примерно такой HTML:

    <a class="b-link b-link_type_wrapper b-link_mode_pseudo" href="…">
        <img class="b-ico" src="…"/>
        <span class="b-link__inner">ссылка</span>
    </a>

Итоговый CSS будет таким (включая CSS для псевдоссылки):

    .b-link_type_wrapper {
        display: inline-block;

        text-decoration: none;
        }
        .b-link__inner {
            line-height: 1.1;

            display: inline-block;

            text-decoration: underline;
            }
        .b-link_type_wrapper .b-ico {
            margin-top: -2px;

            vertical-align: middle;
            }
    #js .b-link_mode_pseudo,
    #js .b-link_mode_pseudo .b-link__inner {
        text-decoration: none;
        border-bottom: 1px dashed;
        }
    #js .b-link_mode_pseudo.b-link_type_wrapper {
        border-bottom: 0;
        }

Рассмотрим несколько моментов в этом коде:

1. Для `.b-link_type_wrapper` и `.b-link__inner` мы прописали `display: inline-block`, так как в большинстве случаев нам будут нужны небольшие однострочные ссылки, в которых нам не хочется переносить иконку на новую строку. Инлайн-блочное поведение с этим помогает, а если возникнет необходимость сделать многострочную ссылку, то можно будет или добавить соответствующий модификатор, или, наоборот, сделать ссылки многострочными по умолчанию.

2. `line-height: 1.1` к `.b-link__inner` был добавлен для того, чтобы расстояние от текста до пунктирного подчёркивания не зависело от межстрочного расстояния у родителей ссылки.

3. Отрицательный `margin-top` для иконки — небольшое улучшение позиционирования в строке (зависит от размера шрифта и `line-height`).

4. Селекторы, начинающиеся с `#js` — техника для определения того, работает ли яваскрипт на странице (подробнее можно почитать в начале [презентации Виталия Харисова][1] с субботника 2009 года). На данный момент эта техника немного устарела, о том как это сейчас делается в рамках [`bem-bl`][4] можно будет прочитать в ближайшеми будущем в [клубе методологии БЭМ][5].

5. `.b-link_mode_pseudo.b-link_type_wrapper` — IE6, который неверно понимает подобные селекторы, уже постепенно отходит на покой, но даже в нём этот селектор будет применяться просто как для `.b-link_type_wrapper` — в большинстве случаев обнуление нижней границы для всех подобных ссылок не будет фатальным.

Итак, имея подобный блок можно очень просто делать множество вещей, на некоторые из них можно посмотреть на [странице с примерами][2].

Помимо упомянутых выше, этот метод позволяет решить ещё ряд задач. Например, без дополнительного элемента (и пока [спецификации text-decoration-style][3] из CSS3 не распространились) добавить `padding` к псевдоссылке практически невозможно.

Однако когда подчёркивание переносится на внутренний элемент, внешнему можно задавать практически любые свойства, поэтому наше подчёркивание всегда будет в порядке. И увеличить область клика теперь очень просто в том числе и для ссылок с иконками.

## Чересполосица многострочных ссылок[<sup>пример</sup>][6]

Второй вопрос, который хочется рассмотреть в этой статье, — эффект, который появляется у многострочных ссылок, когда у родителей стоит большой `line-height`.

В таких ситуациях, если ссылки не блочные, между строками текста ссылок возникают некликабельные пустые места, которые особенно видно, если у ссылок стоит агрессивный ховер (например, смена фона) — в таком случае, проводя курсором над ссылкой, мы получим «рябь». Ну, и попасть по нужной строчке становится труднее.

Решается это довольно просто: нужно соответствующей инлайновой ссылке добавить компенсирующий `padding` сверху и снизу, суммарно равный высоте `line-height` родителя ссылки минус дефолтный `line-height`, значение которого примерно равно `1.25`, плюс добавить ещё немного, чтобы гарантировать погрешности при изменении размера шрифта.

Так, при `line-height: 1.6` достаточно прописать ссылке `padding: 0.3em 0`  и проблема будет решена: площадь ссылки увеличится, а с ней — и удобство использования таких ссылок.

Ещё один метод увеличить кликабельную область многострочных ссылок — сделать их блочными, однако это не всегда возможно и не всегда поведение таких ссылок будет предсказуемым — могут появиться большие пустые кликабельные пространства.

Пример вёрстки многострочных ссылок с большим межстрочным интервалом можно посмотреть [здесь][6].

[1]: http://subbotnik.yandex.st/css-framework/practice.html
[2]: http://yandex-ui.github.com/Examples/links/
[3]: http://dev.w3.org/csswg/css3-text/#text-decoration-style
[4]: http://clubs.ya.ru/bem/replies.xml?item_no=901
[5]: http://clubs.ya.ru/bem/
[6]: http://yandex-ui.github.com/Examples/links/multiline/
[7]: http://img-fotki.yandex.ru/get/4519/1076905.1/0_62fce_6830c8bc_orig